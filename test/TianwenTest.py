
import sys

sys.path.append("/root/GeneralBlockchainFramework")
sys.path.append("/root/GeneralBlockchainFramework/contracts")

from contracts.moduels.Tianwen import Tianwen

record = {
    "item_Element": 'test1',
    "item_N_line": "item_N_line",
    "item_O_XH": "item_O_XH",
    "item_O_XFe": "item_O_XFe",
    "item_O_loge": "item_O_loge",
    "item_C_XH": "item_C_XH",
    "item_C_XFe": "item_C_XFe",
    "item_C_loge": "item_C_loge"
}

tianwen = Tianwen()
txHash = tianwen.set(record['item_Element'], record['item_N_line'], record['item_O_XH'], record['item_O_XFe'], record['item_O_loge'], record['item_C_XH'], record['item_C_XFe'], record['item_C_loge'])
print (txHash)



# >>Deploy:---------------------------------------------------------------------
# deploy {'blockHash': '0x35aa47c94c9fb783125fcbfe92dada0d3f87cc2130211385060b23457c10b944', 'blockNumber': '0x19', 'contractAddress': '0x4fb700f036dbd8a80940a88df8d9e55705a8ac97', 'from': '0x95198b93705e394a916579e048c8a32ddfb900f7', 'gasUsed': '0x53fbf', 'input': '0x608060405234801561001057600080fd5b50610444806100206000396000f30060806040526004361061004c576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff168063693ec85e14610051578063e942b51614610133575b600080fd5b34801561005d57600080fd5b506100b8600480360381019080803590602001908201803590602001908080601f01602080910402602001604051908101604052809392919081815260200183838082843782019150505050505091929192905050506101e2565b6040518080602001828103825283818151815260200191508051906020019080838360005b838110156100f85780820151818401526020810190506100dd565b50505050905090810190601f1680156101255780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34801561013f57600080fd5b506101e0600480360381019080803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290803590602001908201803590602001908080601f01602080910402602001604051908101604052809392919081815260200183838082843782019150505050505091929192905050506102ef565b005b60606000826040518082805190602001908083835b60208310151561021c57805182526020820191506020810190506020830392506101f7565b6001836020036101000a03801982511681845116808217855250505050505090500191505090815260200160405180910390208054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156102e35780601f106102b8576101008083540402835291602001916102e3565b820191906000526020600020905b8154815290600101906020018083116102c657829003601f168201915b50505050509050919050565b806000836040518082805190602001908083835b6020831015156103285780518252602082019150602081019050602083039250610303565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020908051906020019061036e929190610373565b505050565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106103b457805160ff19168380011785556103e2565b828001600101855582156103e2579182015b828111156103e15782518255916020019190600101906103c6565b5b5090506103ef91906103f3565b5090565b61041591905b808211156104115760008160009055506001016103f9565b5090565b905600a165627a7a72305820292feb823ca75db99393814400e6e6ff2d2e5d33946f9b9dee4266ffae2ac2070029', 'logs': [], 'logsBloom': '0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000', 'output': '0x', 'root': '0x26b94fe1f18b918b9644cb59bc2a5ef2d0b5c011132ce6e5b8d4b79a2c474dd7', 'status': '0x0', 'to': '0x0000000000000000000000000000000000000000', 'transactionHash': '0x9766313679e1a5eed478dc14a1fce26582d36ba6a970b952ffd2b510e1a1d443', 'transactionIndex': '0x0'}
# new address :  0x4fb700f036dbd8a80940a88df8d9e55705a8ac97
#
# >>sendRawTransaction:----------------------------------------------------------
# to_address 0x4fb700f036dbd8a80940a88df8d9e55705a8ac97
# contract_abi [{'constant': True, 'inputs': [{'name': 'item_element', 'type': 'string'}], 'name': 'get', 'outputs': [{'name': 'record', 'type': 'string'}], 'payable': False, 'stateMutability': 'view', 'type': 'function'}, {'constant': False, 'inputs': [{'name': 'item_element', 'type': 'string'}, {'name': 'json_record', 'type': 'string'}], 'name': 'set', 'outputs': [], 'payable': False, 'stateMutability': 'nonpayable', 'type': 'function'}, {'inputs': [], 'payable': False, 'stateMutability': 'nonpayable', 'type': 'constructor'}]
#
# >>parse receipt and transaction:----------------------------------------------------------
# transaction hash:  0x209760f6854cc5473ed06a5972535187567f0e4397ba610c7f8dc8bd9de73458
# transaction input parse: 0x209760f6854cc5473ed06a5972535187567f0e4397ba610c7f8dc8bd9de73458
# {'name': 'set', 'args': ('test1', '{"item_Element": "test1", "item_N_line": "item_N_line", "item_O_XH": "item_O_XH", "item_O_XFe": "item_O_XFe", "item_O_loge": "item_O_loge", "item_C_XH": "item_C_XH", "item_C_XFe": "item_C_XFe", "item_C_loge": "item_C_loge"}'), 'signature': 'set(string,string)'}
# 0x209760f6854cc5473ed06a5972535187567f0e4397ba610c7f8dc8bd9de73458


